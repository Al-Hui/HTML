<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Конструктор формулировки риска данных — Сбер</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    /* === SBERBANK UI KIT — LIGHT THEME === */
    :root {
      --sber-green: #21A038;
      --sber-green-light: #00D36A;
      --sber-green-dark: #118C29;
      --text-main: #1A1A1A;
      --text-muted: #6A6A6A;
      --border: #E5E5E5;
      --bg: #F7F9FA;
      --card-bg: #FFFFFF;
      --radius: 12px;
      --shadow: 0 4px 20px rgba(0,0,0,0.06);
      --transition: 0.15s ease;
    }

    body {
      background: var(--bg);
      color: var(--text-main);
      font-family: "Segoe UI", system-ui, sans-serif;
      margin: 0;
      padding: 24px;
    }

    .panel {
      background: var(--card-bg);
      border-radius: var(--radius);
      padding: 28px;
      max-width: 760px;
      margin: 0 auto;
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
    }

    h2 {
      margin-top: 0;
      font-size: 22px;
      font-weight: 600;
      color: var(--text-main);
    }

    .subtitle {
      font-size: 13px;
      color: var(--text-muted);
      margin-top: 4px;
      margin-bottom: 8px;
    }

    label {
      display: block;
      margin-top: 18px;
      font-size: 15px;
      font-weight: 500;
    }

    input, select, textarea {
      width: 100%;
      margin-top: 6px;
      padding: 12px;
      font-size: 14px;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      background: #FFFFFF;
      transition: var(--transition);
      box-sizing: border-box;
    }

    input::placeholder,
    textarea::placeholder {
      color: var(--text-muted);
    }

    input:focus, select:focus, textarea:focus {
      border-color: var(--sber-green);
      box-shadow: 0 0 0 3px rgba(0,211,106,0.25);
      outline: none;
    }

    textarea {
      min-height: 68px;
      resize: vertical;
    }

    .hint {
      font-size: 12px;
      color: var(--text-muted);
      margin-top: 4px;
    }

    /* Список характеристик качества — одна характеристика в строку */
    .quality-list {
      margin-top: 10px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .quality-item {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      padding: 10px 12px;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      background: #FAFCFC;
      transition: var(--transition);
    }

    .quality-item:hover {
      border-color: var(--sber-green);
      background: #F2FDF7;
    }

    .quality-item input[type="checkbox"] {
      width: 18px;
      height: 18px;
      margin-top: 2px;
      accent-color: var(--sber-green);
      flex-shrink: 0;
    }

    .quality-item span {
      margin-top: 1px;
      font-size: 14px;
      color: var(--text-main);
      line-height: 1.35;
    }

    .btn {
      margin-top: 24px;
      background: linear-gradient(135deg, var(--sber-green-light), var(--sber-green));
      border: none;
      padding: 14px 22px;
      font-size: 15px;
      font-weight: 600;
      color: #FFFFFF;
      border-radius: var(--radius);
      cursor: pointer;
      transition: var(--transition);
    }

    .btn:hover {
      background: var(--sber-green-dark);
    }

    .output {
      margin-top: 24px;
      padding: 18px;
      border-radius: var(--radius);
      background: #F2FDF7;
      border: 1px solid var(--sber-green);
      white-space: pre-line;
      font-size: 15px;
      line-height: 1.5;
      color: var(--text-main);
      box-sizing: border-box;
    }

    .hidden {
      display: none;
    }
  </style>
</head>
<body>

<div class="panel">
  <h2>Конструктор формулировки риска данных</h2>
  <div class="subtitle">
    Ответьте на вопросы — система соберёт одно сложное предложение в методологическом формате риска данных.
  </div>

  <label>Бизнес-процесс</label>
  <input id="bp" placeholder='Например: "П1227. Формирование отчётности ППРБ"'>

  <label>ИТ-услуга</label>
  <input id="it" placeholder='Например: "Афина. Модуль реестров ППРБ"'>

  <label>Тип потерь</label>
  <select id="loss">
    <option value="прямых потерь">прямые потери</option>
    <option value="косвенных потерь">косвенные потери</option>
  </select>

  <label>Описание события (что произошло?)</label>
  <input id="eventDesc" placeholder='Например: некорректного формирования реестра транзакций'>

  <label>Источник данных (поставщик данных)</label>
  <input id="source" placeholder='Например: переход между стандИН и стандАУТ'>

  <label>Характеристики некачественных данных</label>
  <div class="hint">Выберите все применимые характеристики качества данных.</div>

  <div class="quality-list">
    <label class="quality-item">
      <input type="checkbox" value="точностью (есть ошибки)">
      <span>точностью — есть ошибки</span>
    </label>

    <label class="quality-item">
      <input type="checkbox" value="актуальностью (устаревшие)">
      <span>актуальностью — устаревшие</span>
    </label>

    <label class="quality-item">
      <input type="checkbox" value="согласованностью (противоречат друг другу)">
      <span>согласованностью — противоречат друг другу</span>
    </label>

    <label class="quality-item">
      <input type="checkbox" value="доступностью (невозможно получить)">
      <span>доступностью — невозможно получить</span>
    </label>

    <label class="quality-item">
      <input type="checkbox" value="контролируемостью (нельзя проверить)">
      <span>контролируемостью — нельзя проверить</span>
    </label>

    <label class="quality-item">
      <input type="checkbox" value="восстанавливаемостью (нельзя восстановить после сбоя)">
      <span>восстанавливаемостью — нельзя восстановить после сбоя</span>
    </label>
  </div>

  <label>К чему приводит ошибка?</label>
  <input id="effect" placeholder='Например: реестры формируются с дубликатами транзакций'>

  <label>Глубинная причина</label>
  <select id="root" onchange="toggleCustomRoot()">
    <option value="отсутствия контроля качества данных на стороне поставщика">
      отсутствия контроля качества данных на стороне поставщика
    </option>
    <option value="отсутствия контракта поставки данных">
      отсутствия контракта поставки данных
    </option>
    <option value="некорректной логики обработки данных">
      некорректной логики обработки данных
    </option>
    <option value="сбоя обработки данных на стороне поставщика">
      сбоя обработки данных на стороне поставщика
    </option>
    <option value="custom">Другое (указать вручную)</option>
  </select>
  <input id="customRoot" class="hidden" placeholder="Введите свою формулировку глубинной причины">

  <button class="btn" onclick="generate()">Сформировать формулировку</button>

  <div id="out" class="output">
    Здесь появится готовая формулировка риска данных после заполнения полей и нажатия на кнопку.
  </div>
</div>

<script>
  function toggleCustomRoot() {
    const rootSelect = document.getElementById("root");
    const custom = document.getElementById("customRoot");

    if (rootSelect.value === "custom") {
      custom.classList.remove("hidden");
    } else {
      custom.classList.add("hidden");
      custom.value = "";
    }
  }

  function generate() {
    const bp = document.getElementById("bp").value.trim();
    const it = document.getElementById("it").value.trim();
    const loss = document.getElementById("loss").value;
    const eventDesc = document.getElementById("eventDesc").value.trim();
    const source = document.getElementById("source").value.trim();
    const effect = document.getElementById("effect").value.trim();

    let rootVal = document.getElementById("root").value;
    if (rootVal === "custom") {
      rootVal = document.getElementById("customRoot").value.trim();
    }

    const qualities = Array.from(
      document.querySelectorAll('.quality-list input[type="checkbox"]:checked')
    ).map(cb => cb.value);

    if (!bp || !it || !eventDesc || !source || !effect || !rootVal || qualities.length === 0) {
      document.getElementById("out").textContent =
        "Заполните все обязательные поля и выберите хотя бы одну характеристику качества данных.";
      return;
    }

    const q = qualities.join(", ");

    const formula =
      `В бизнес-процессе "${bp}" в ИТ-услуге "${it}" ` +
      `существует риск возникновения ${loss} ` +
      `из-за ${eventDesc} ` +
      `из-за некачественных данных (${q}), ` +
      `поступающих от "${source}", ` +
      `что может приводить к тому что ${effect} ` +
      `по причине ${rootVal}.`;

    document.getElementById("out").textContent = formula;
  }
</script>

</body>
</html>