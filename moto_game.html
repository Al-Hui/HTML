<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–ú–æ—Ç–æ-–≥–µ—Ä–æ–π ‚Äî —É—Ä–æ–≤–Ω–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg: #dbeafe;
      --panel: #ffffff;
      --text: #111827;
      --muted: #6b7280;
      --accent: #2563eb;
      --danger: #ef4444;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
      background: radial-gradient(circle at top, #bfdbfe 0, #dbeafe 40%, #eff6ff 100%);
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif;
      color: var(--text);
    }

    .wrap {
      width: 100%;
      max-width: 760px;
      background: var(--panel);
      border-radius: 22px;
      box-shadow: 0 18px 40px rgba(15, 23, 42, 0.22);
      padding: 16px 16px 18px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    h2 {
      font-size: 20px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .subtitle {
      font-size: 13px;
      color: var(--muted);
      margin-bottom: 4px;
    }

    .row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 13px;
      gap: 10px;
      flex-wrap: wrap;
    }

    .score-group {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .pill {
      padding: 4px 10px;
      border-radius: 999px;
      background: #f9fafb;
      border: 1px solid #e5e7eb;
      font-size: 12px;
    }

    .pill span {
      font-weight: 600;
    }

    .level-pill {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 4px 10px;
      border-radius: 999px;
      background: #eef2ff;
      border: 1px solid #e5e7eb;
      font-size: 12px;
    }

    .level-pill b {
      font-weight: 600;
      color: var(--accent);
    }

    canvas {
      width: 100%;
      height: auto;
      border-radius: 18px;
      display: block;
      background: linear-gradient(#bfdbfe 0 55%, #4ade80 55% 100%);
      border: 1px solid #e5e7eb;
    }

    .controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 8px;
      flex-wrap: wrap;
      gap: 8px;
    }

    .btn {
      padding: 8px 14px;
      border-radius: 12px;
      border: none;
      cursor: pointer;
      font-size: 13px;
      font-weight: 500;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .btn-primary {
      background: var(--accent);
      color: #ffffff;
      box-shadow: 0 14px 26px rgba(37, 99, 235, 0.6);
    }

    .btn-primary:active {
      transform: translateY(1px);
      box-shadow: 0 7px 14px rgba(37, 99, 235, 0.8);
    }

    .btn-ghost {
      background: transparent;
      color: var(--muted);
    }

    .hint {
      font-size: 12px;
      color: var(--muted);
    }

    .hint b {
      color: var(--accent);
    }

    .msg {
      margin-top: 4px;
      font-size: 12px;
      color: var(--muted);
      min-height: 16px;
    }

    @media (max-width: 520px) {
      .wrap {
        padding: 14px 10px 14px;
        border-radius: 18px;
      }
      h2 {
        font-size: 18px;
      }
    }
  </style>
</head>
<body>
<div class="wrap">
  <h2>–ú–æ—Ç–æ-–≥–µ—Ä–æ–π üèç</h2>
  <div class="subtitle">
    –ù–∞—á–Ω–∏ —Å –ø—Ä–æ—Å—Ç–æ–≥–æ —É—Ä–æ–≤–Ω—è –∏ –ø—Ä–æ–∫–∞—á–∞–π—Å—è –¥–æ ¬´–°—É–ø–µ—Ä—Å–∫–æ—Ä–æ—Å—Ç–∏¬ª! –ì–µ—Ä–æ–π –Ω–∞ —Å–ø–æ—Ä—Ç–∏–≤–Ω–æ–º –º–æ—Ç–æ—Ü–∏–∫–ª–µ –º–æ–∂–µ—Ç —Å–¥–µ–ª–∞—Ç—å <b>–¥–æ 3 –ø—Ä—ã–∂–∫–æ–≤ –ø–æ–¥—Ä—è–¥</b>.
  </div>

  <div class="row">
    <div class="score-group">
      <div class="pill">–û—á–∫–∏: <span id="score">0</span></div>
      <div class="pill">–†–µ–∫–æ—Ä–¥: <span id="best">0</span></div>
    </div>
    <div class="level-pill">
      –£—Ä–æ–≤–µ–Ω—å: <b id="levelName">–û—á–µ–Ω—å –ª–µ–≥–∫–æ</b>
    </div>
  </div>

  <canvas id="game" width="640" height="260"></canvas>

  <div class="controls">
    <button class="btn btn-primary" id="startBtn">‚ñ∂ –ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
    <div class="hint">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: <b>–ü—Ä–æ–±–µ–ª</b> –∏–ª–∏ <b>—Ç–∞–ø –ø–æ —ç–∫—Ä–∞–Ω—É</b> ‚Äî –ø—Ä—ã–∂–æ–∫ (–¥–æ 3 —Ä–∞–∑ –ø–æ–¥—Ä—è–¥).</div>
  </div>

  <div class="msg" id="msg"></div>
</div>

<script>
  const canvas = document.getElementById("game");
  const ctx = canvas.getContext("2d");

  const scoreEl = document.getElementById("score");
  const bestEl = document.getElementById("best");
  const levelNameEl = document.getElementById("levelName");
  const msgEl = document.getElementById("msg");
  const startBtn = document.getElementById("startBtn");

  // –£—Ä–æ–≤–Ω–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ –Ω–∞–±—Ä–∞–Ω–Ω—ã–º –æ—á–∫–∞–º
  const LEVELS = [
    { name: "–û—á–µ–Ω—å –ª–µ–≥–∫–æ",   minScore: 0,   baseSpeed: 3.0,  obsInterval: 130, starInterval: 90 },
    { name: "–õ–µ–≥–∫–æ",         minScore: 25,  baseSpeed: 3.4,  obsInterval: 115, starInterval: 80 },
    { name: "–ù–æ—Ä–º–∞–ª—å–Ω–æ",     minScore: 60,  baseSpeed: 3.9,  obsInterval: 100, starInterval: 75 },
    { name: "–ë—ã—Å—Ç—Ä–æ",        minScore: 120, baseSpeed: 4.5,  obsInterval: 90,  starInterval: 70 },
    { name: "–°—É–ø–µ—Ä—Å–∫–æ—Ä–æ—Å—Ç—å", minScore: 200, baseSpeed: 5.2,  obsInterval: 80,  starInterval: 65 }
  ];

  let currentLevel = LEVELS[0];

  let running = false;
  let gameOver = false;

  let score = 0;
  let best = Number(localStorage.getItem("moto_best")) || 0;
  bestEl.textContent = best;

  let speed = currentLevel.baseSpeed;
  const gravity = 0.55;
  const jumpForce = -11.5;
  const maxJumps = 3;
  let jumpCount = 0;

  const groundY = canvas.height - 52;

  const player = {
    x: 70,
    y: groundY - 40,
    w: 60,
    h: 40,
    vy: 0
  };

  const obstacles = [];
  const stars = [];

  let obsTimer = 0;
  let starTimer = 0;

  // ==== –£–†–û–í–ù–ò ====

  function updateLevelByScore() {
    let newLevel = currentLevel;
    for (const lvl of LEVELS) {
      if (score >= lvl.minScore) {
        newLevel = lvl;
      }
    }
    if (newLevel !== currentLevel) {
      currentLevel = newLevel;
      msgEl.textContent = `–ù–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å: ${currentLevel.name}!`;
    }
    levelNameEl.textContent = currentLevel.name;
    // –ë–∞–∑–æ–≤–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å —É—Ä–æ–≤–Ω—è + —á—É—Ç—å-—á—É—Ç—å –æ—Ç –æ—á–∫–æ–≤
    speed = currentLevel.baseSpeed + score * 0.005;
  }

  // ==== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ====

  function resetGame() {
    running = false;
    gameOver = false;
    score = 0;
    currentLevel = LEVELS[0];
    speed = currentLevel.baseSpeed;
    jumpCount = 0;
    obstacles.length = 0;
    stars.length = 0;
    obsTimer = 40;
    starTimer = 60;
    player.y = groundY - player.h;
    player.vy = 0;
    scoreEl.textContent = score;
    levelNameEl.textContent = currentLevel.name;
    msgEl.textContent = "–ù–∞–∂–º–∏ ¬´–ù–∞—á–∞—Ç—å –∏–≥—Ä—É¬ª –∏–ª–∏ –ø—Ä–æ–±–µ–ª, —á—Ç–æ–±—ã —Å—Ç–∞—Ä—Ç–æ–≤–∞—Ç—å.";
    draw();
  }

  // ==== –°–ü–ê–í–ù ====

  function spawnObstacle() {
    // —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π
    const type = Math.random();
    let w, h;
    if (type < 0.4) {
      // —Ç—É–º–±–∞
      w = 26 + Math.random() * 14;
      h = 20 + Math.random() * 18;
    } else if (type < 0.8) {
      // –±–∞—Ä—å–µ—Ä
      w = 40 + Math.random() * 14;
      h = 18 + Math.random() * 10;
    } else {
      // —à–∏–Ω—ã (—à–∏—Ä–æ–∫–∏–µ, –Ω–∏–∑–∫–∏–µ)
      w = 32 + Math.random() * 10;
      h = 16 + Math.random() * 6;
    }

    obstacles.push({
      x: canvas.width + 10,
      y: groundY - h,
      w,
      h
    });
  }

  function spawnStar() {
    const minY = groundY - 90;
    const maxY = groundY - 40;
    const y = minY + Math.random() * (maxY - minY);

    stars.push({
      x: canvas.width + 10,
      y,
      r: 10,
      taken: false
    });
  }

  // ==== –£–ü–†–ê–í–õ–ï–ù–ò–ï ====

  function jump() {
    if (gameOver) return;
    if (!running) {
      running = true;
      msgEl.textContent = "–ü—Ä—ã–≥–∞–π —á–µ—Ä–µ–∑ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è –∏ —Å–æ–±–∏—Ä–∞–π –∑–≤—ë–∑–¥—ã ‚≠ê";
      return;
    }
    if (jumpCount < maxJumps) {
      player.vy = jumpForce;
      jumpCount++;
    }
  }

  document.addEventListener("keydown", (e) => {
    if (e.code === "Space") {
      e.preventDefault();
      if (gameOver) {
        resetGame();
        running = true;
        msgEl.textContent = "–ù–æ–≤–∞—è –ø–æ–ø—ã—Ç–∫–∞! –ñ–º–∏, —á—Ç–æ–±—ã –ø—Ä—ã–≥–∞—Ç—å.";
      } else {
        jump();
      }
    }
  });

  canvas.addEventListener("pointerdown", () => {
    if (gameOver) {
      resetGame();
      running = true;
      msgEl.textContent = "–ù–æ–≤–∞—è –ø–æ–ø—ã—Ç–∫–∞! –ñ–º–∏, —á—Ç–æ–±—ã –ø—Ä—ã–≥–∞—Ç—å.";
    } else {
      jump();
    }
  });

  startBtn.addEventListener("click", () => {
    if (gameOver) {
      resetGame();
      running = true;
      msgEl.textContent = "–ù–æ–≤–∞—è –ø–æ–ø—ã—Ç–∫–∞! –ñ–º–∏, —á—Ç–æ–±—ã –ø—Ä—ã–≥–∞—Ç—å.";
    } else {
      running = true;
      msgEl.textContent = "–ü—Ä—ã–≥–∞–π —á–µ—Ä–µ–∑ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è –∏ —Å–æ–±–∏—Ä–∞–π –∑–≤—ë–∑–¥—ã ‚≠ê";
    }
  });

  // ==== –û–ë–ù–û–í–õ–ï–ù–ò–ï ====

  function update() {
    if (!running) {
      requestAnimationFrame(update);
      return;
    }

    // –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏—è
    player.vy += gravity;
    player.y += player.vy;

    if (player.y >= groundY - player.h) {
      player.y = groundY - player.h;
      player.vy = 0;
      jumpCount = 0;
    }

    // –æ–±–Ω–æ–≤–ª—è–µ–º —Ç–∞–π–º–µ—Ä—ã —Å–ø–∞–≤–Ω–∞ —Å —É—á—ë—Ç–æ–º —É—Ä–æ–≤–Ω—è
    obsTimer--;
    starTimer--;

    if (obsTimer <= 0) {
      spawnObstacle();
      const base = currentLevel.obsInterval;
      obsTimer = base + (Math.random() * 25 - 12); // –Ω–µ–±–æ–ª—å—à–∞—è —Ä–∞–Ω–¥–æ–º–∏–∑–∞—Ü–∏—è
      if (obsTimer < 60) obsTimer = 60;
    }

    if (starTimer <= 0) {
      spawnStar();
      const baseS = currentLevel.starInterval;
      starTimer = baseS + (Math.random() * 30 - 10);
      if (starTimer < 50) starTimer = 50;
    }

    // –¥–≤–∏–∂–µ–Ω–∏–µ
    obstacles.forEach(o => o.x -= speed);
    stars.forEach(s => s.x -= speed * 0.9);

    // —É–¥–∞–ª—è–µ–º —É—à–µ–¥—à–∏–µ –æ–±—ä–µ–∫—Ç—ã
    for (let i = obstacles.length - 1; i >= 0; i--) {
      if (obstacles[i].x + obstacles[i].w < 0) {
        obstacles.splice(i, 1);
        // –¥–∞—ë–º –æ—á–∫–∏ –∑–∞ —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–π–¥–µ–Ω–Ω–æ–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ
        score += 2;
      }
    }

    for (let i = stars.length - 1; i >= 0; i--) {
      if (stars[i].x + stars[i].r < 0 || stars[i].taken) {
        stars.splice(i, 1);
      }
    }

    // —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è
    for (const o of obstacles) {
      if (rectsCollide(player, o)) {
        onGameOver();
        break;
      }
    }

    // —Å–±–æ—Ä –∑–≤—ë–∑–¥
    for (const s of stars) {
      if (!s.taken && circleRectCollide(s.x, s.y, s.r, player)) {
        s.taken = true;
        score += 5;
      }
    }

    // –æ–±–Ω–æ–≤–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å –∏ —Å–∫–æ—Ä–æ—Å—Ç—å
    updateLevelByScore();

    scoreEl.textContent = score;

    draw();
    requestAnimationFrame(update);
  }

  function onGameOver() {
    running = false;
    gameOver = true;
    msgEl.textContent = "–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞. –ù–∞–∂–º–∏ ¬´–ù–∞—á–∞—Ç—å –∏–≥—Ä—É¬ª –∏–ª–∏ –ø—Ä–æ–±–µ–ª, —á—Ç–æ–±—ã –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞.";

    if (score > best) {
      best = score;
      localStorage.setItem("moto_best", best);
      bestEl.textContent = best;
      msgEl.textContent += " –ù–æ–≤—ã–π —Ä–µ–∫–æ—Ä–¥! üéâ";
    }
  }

  // ==== –ú–ê–¢–ï–ú–ê–¢–ò–ö–ê –°–¢–û–õ–ö–ù–û–í–ï–ù–ò–ô ====

  function rectsCollide(a, b) {
    return (
      a.x < b.x + b.w &&
      a.x + a.w > b.x &&
      a.y < b.y + b.h &&
      a.y + a.h > b.y
    );
  }

  function circleRectCollide(cx, cy, cr, rect) {
    const testX = Math.max(rect.x, Math.min(cx, rect.x + rect.w));
    const testY = Math.max(rect.y, Math.min(cy, rect.y + rect.h));
    const dx = cx - testX;
    const dy = cy - testY;
    return dx * dx + dy * dy <= cr * cr;
  }

  // ==== –û–¢–†–ò–°–û–í–ö–ê ====

  function drawBackground() {
    // –Ω–µ–±–æ
    const sky = ctx.createLinearGradient(0, 0, 0, canvas.height);
    sky.addColorStop(0, "#bfdbfe");
    sky.addColorStop(0.6, "#93c5fd");
    sky.addColorStop(1, "#4ade80");
    ctx.fillStyle = sky;
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // –¥–∞–ª—å–Ω–∏–µ —Ö–æ–ª–º—ã
    ctx.fillStyle = "#60a5fa";
    ctx.beginPath();
    ctx.moveTo(0, groundY - 40);
    ctx.quadraticCurveTo(canvas.width * 0.25, groundY - 80, canvas.width * 0.5, groundY - 40);
    ctx.quadraticCurveTo(canvas.width * 0.75, groundY, canvas.width, groundY - 30);
    ctx.lineTo(canvas.width, groundY);
    ctx.lineTo(0, groundY);
    ctx.closePath();
    ctx.fill();

    // –¥–æ—Ä–æ–≥–∞
    ctx.fillStyle = "#1f2937";
    ctx.fillRect(0, groundY + 8, canvas.width, canvas.height - groundY - 8);

    // —Ä–∞–∑–º–µ—Ç–∫–∞
    ctx.strokeStyle = "#e5e7eb";
    ctx.lineWidth = 3;
    ctx.setLineDash([18, 14]);
    ctx.beginPath();
    ctx.moveTo(0, groundY + 24);
    ctx.lineTo(canvas.width, groundY + 24);
    ctx.stroke();
    ctx.setLineDash([]);
  }

  function drawStar(x, y, r) {
    ctx.save();
    ctx.translate(x, y);
    ctx.rotate(-Math.PI / 2);
    ctx.beginPath();
    const spikes = 5;
    const outerRadius = r;
    const innerRadius = r / 2.4;
    for (let i = 0; i < spikes * 2; i++) {
      const angle = (Math.PI * i) / spikes;
      const radius = i % 2 === 0 ? outerRadius : innerRadius;
      ctx.lineTo(Math.cos(angle) * radius, Math.sin(angle) * radius);
    }
    ctx.closePath();
    ctx.fillStyle = "#facc15";
    ctx.fill();
    ctx.restore();
  }

  function drawObstacle(o) {
    ctx.fillStyle = "#ef4444";
    ctx.beginPath();
    ctx.roundRect(o.x, o.y, o.w, o.h, 6);
    ctx.fill();

    // –Ω–µ–±–æ–ª—å—à–∏–µ –¥–µ—Ç–∞–ª–∏
    ctx.fillStyle = "#fee2e2";
    ctx.fillRect(o.x + 4, o.y + 4, o.w - 8, 4);
  }

  function drawMotoRider(p) {
    // –¢–µ–Ω—å –ø–æ–¥ –º–æ—Ç–æ—Ü–∏–∫–ª–æ–º
    ctx.fillStyle = "rgba(15,23,42,0.35)";
    ctx.beginPath();
    ctx.ellipse(p.x + p.w / 2, p.y + p.h + 10, p.w / 2.6, 6, 0, 0, Math.PI * 2);
    ctx.fill();

    // –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –±–∞–∑—ã –º–æ—Ç–æ—Ü–∏–∫–ª–∞
    const baseY = p.y + p.h - 8;

    // –ó–∞–¥–Ω–µ–µ –∫–æ–ª–µ—Å–æ
    ctx.fillStyle = "#111827";
    ctx.beginPath();
    ctx.arc(p.x + 12, baseY, 10, 0, Math.PI * 2);
    ctx.fill();
    ctx.fillStyle = "#e5e7eb";
    ctx.beginPath();
    ctx.arc(p.x + 12, baseY, 4, 0, Math.PI * 2);
    ctx.fill();

    // –ü–µ—Ä–µ–¥–Ω–µ–µ –∫–æ–ª–µ—Å–æ
    ctx.fillStyle = "#111827";
    ctx.beginPath();
    ctx.arc(p.x + p.w - 10, baseY, 10, 0, Math.PI * 2);
    ctx.fill();
    ctx.fillStyle = "#e5e7eb";
    ctx.beginPath();
    ctx.arc(p.x + p.w - 10, baseY, 4, 0, Math.PI * 2);
    ctx.fill();

    // –ö–æ—Ä–ø—É—Å –º–æ—Ç–æ—Ü–∏–∫–ª–∞ (—Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–π)
    ctx.fillStyle = "#1d4ed8";
    ctx.beginPath();
    ctx.moveTo(p.x + 8, baseY - 4);
    ctx.lineTo(p.x + p.w / 2 - 6, baseY - 18);
    ctx.lineTo(p.x + p.w - 4, baseY - 10);
    ctx.lineTo(p.x + p.w - 14, baseY);
    ctx.lineTo(p.x + 20, baseY + 2);
    ctx.closePath();
    ctx.fill();

    // –°–∏–¥–µ–Ω—å–µ
    ctx.fillStyle = "#0f172a";
    ctx.fillRect(p.x + p.w / 2 - 6, baseY - 20, 20, 6);

    // –†—É–ª—å
    ctx.strokeStyle = "#0f172a";
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(p.x + p.w - 16, baseY - 14);
    ctx.lineTo(p.x + p.w - 4, baseY - 20);
    ctx.stroke();

    // –ú–∞–ª—å—á–∏–∫ (–≥–æ–Ω—â–∏–∫)
    const headX = p.x + p.w / 2;
    const headY = baseY - 32;

    // —à–ª–µ–º
    ctx.fillStyle = "#f97316";
    ctx.beginPath();
    ctx.arc(headX, headY, 10, 0, Math.PI * 2);
    ctx.fill();
    // –≤–∏–∑–æ—Ä
    ctx.fillStyle = "#e5e7eb";
    ctx.beginPath();
    ctx.arc(headX + 2, headY + 2, 6, 0.2 * Math.PI, 0.9 * Math.PI);
    ctx.fill();

    // —Ç—É–ª–æ–≤–∏—â–µ
    ctx.fillStyle = "#0f172a";
    ctx.fillRect(headX - 6, headY + 8, 12, 14);

    // —Ä—É–∫–∞
    ctx.strokeStyle = "#0f172a";
    ctx.lineWidth = 3;
    ctx.beginPath();
    ctx.moveTo(headX + 2, headY + 10);
    ctx.lineTo(p.x + p.w - 10, baseY - 16);
    ctx.stroke();

    // –Ω–æ–≥–∏
    ctx.beginPath();
    ctx.moveTo(headX - 4, headY + 22);
    ctx.lineTo(p.x + 18, baseY - 4);
    ctx.moveTo(headX + 4, headY + 22);
    ctx.lineTo(p.x + 26, baseY - 2);
    ctx.stroke();
  }

  function draw() {
    drawBackground();

    // –∑–≤—ë–∑–¥—ã
    for (const s of stars) {
      drawStar(s.x, s.y, s.r);
    }

    // –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è
    for (const o of obstacles) {
      drawObstacle(o);
    }

    // –º–æ—Ç–æ—Ü–∏–∫–ª–∏—Å—Ç
    drawMotoRider(player);

    if (!running && !gameOver) {
      ctx.fillStyle = "rgba(15,23,42,0.25)";
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = "#ffffff";
      ctx.font = "bold 20px system-ui";
      ctx.textAlign = "center";
      ctx.fillText("–ù–∞–∂–º–∏ –ø—Ä–æ–±–µ–ª –∏–ª–∏ —Ç–∞–ø, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å", canvas.width / 2, canvas.height / 2 - 4);
      ctx.font = "14px system-ui";
      ctx.fillText("–ü—Ä—ã–∂–æ–∫ –¥–æ 3 —Ä–∞–∑ –ø–æ–¥—Ä—è–¥. –ù–∞—á–Ω–∏ —Å –ª—ë–≥–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è!", canvas.width / 2, canvas.height / 2 + 20);
    }

    if (gameOver) {
      ctx.fillStyle = "rgba(15,23,42,0.35)";
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = "#ffffff";
      ctx.font = "bold 22px system-ui";
      ctx.textAlign = "center";
      ctx.fillText("–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞", canvas.width / 2, canvas.height / 2 - 8);
      ctx.font = "14px system-ui";
      ctx.fillText("–ù–∞–∂–º–∏ ¬´–ù–∞—á–∞—Ç—å –∏–≥—Ä—É¬ª –∏–ª–∏ –ø—Ä–æ–±–µ–ª, —á—Ç–æ–±—ã –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –µ—â—ë —Ä–∞–∑", canvas.width / 2, canvas.height / 2 + 18);
    }
  }

  // ==== –°–¢–ê–†–¢ ====

  resetGame();
  requestAnimationFrame(update);
</script>
</body>
</html>